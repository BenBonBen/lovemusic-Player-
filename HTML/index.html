<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="../CSS/index.css" />
    <link
      rel="stylesheet"
      href="http://at.alicdn.com/t/font_508229_s987uma0fiuow29.css"
    />
  </head>

  <body>
    <!-- 头部导航条 -->
    <div class="nav">
      <div class="container">
        <a class="menu"></a>
        <div>
          <a href="" class="iconfont icon-yinyue"></a>
          <a href="" class="iconfont icon-pindao"></a>
          <a href="" class="iconfont icon-community"></a>
        </div>
        <a href="" class="search"></a>
      </div>
    </div>

    <!-- 底部播放栏 -->
    <div class="playBar">
      <div class="container">
        <a href="javascript:;" id="song-cover" class="fl">
          <img
            src="http://imge.kugou.com/stdmusic/20150720/20150720213627602031.jpg"
          />
        </a>
        <a class="song-info" href="javascript:;">
          <h4>张学友</h4>
          <h5>张学友 - 只想一生跟你走</h5>
        </a>
        <div class="fr">
          <a href="javascript:;" id="playList"></a>
          <a href="javascript:;" id="playBtn" class="playing"></a>
        </div>
      </div>
      <audio
        id="music"
        src="http://fs.w.kugou.com/201806010325/6bf3c8289daf1d3545078679563e5804/G005/M09/16/09/pYYBAFT59oGAC-fDAEyTcN8a4sA378.mp3"
      ></audio>
    </div>
  </body>

  <!-- 主页三个功能模块，1轮播图 2电台 3热门歌单 -->
  <div class="swiper-box">
    <div class="swiper">
      <!-- 我的音乐 -->
      <div class="myMusic"></div>
      <!-- 电台频道 -->
      <div class="dj">
        <div class="slide">
          <ul class="imgul" id="imgul"></ul>
        </div>
      </div>
      <!-- 讨论社区 -->
      <div class="community"></div>
    </div>
  </div>
</html>

<script src="../JS/jquery-3.3.1.min.js"></script>
<script>
  $.ajax({
    url: 'https://c.y.qq.com/musichall/fcgi-bin/fcg_yqqhomepagerecommend.fcg', //请求的url地址
    dataType: 'jsonp', //返回格式为json
    async: true, //请求是否异步，默认为异步，这也是ajax重要特性
    type: 'get', //请求方式
    jsonp: 'jsonpCallback',
    success: function(req) {
      //请求成功时处理
      var myData = req.data;
      console.log(myData);
      handleSlide(myData);
    },
    error: function() {
      //请求出错处理
      console.log('cuowu');
    }
  });

  // 获取轮播图
  function handleSlide(mydata) {
    var $imgul = $('.imgul');
    var slidehtml = '';
    for (var i = 0; i < mydata.slider.length; i++) {
      slidehtml += `<li>
                        <a href="${mydata.slider[i].linkUrl}">
                            <img src="${mydata.slider[i].picUrl}">
                        </a>
                    </li>`;
    }
    $imgul.html(slidehtml);
  }
</script>
